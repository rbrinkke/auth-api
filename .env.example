# Auth API - Environment Configuration Template
# Copy this file to .env and customize the values for your environment

# ================
# Database (PostgreSQL)
# ================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=activitydb
POSTGRES_USER=activity_user
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_SCHEMA=activity
POSTGRES_POOL_MIN_SIZE=5
POSTGRES_POOL_MAX_SIZE=20
POSTGRES_POOL_COMMAND_TIMEOUT=60

# ================
# Redis
# ================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD=optional_redis_password

# ================
# JWT Security
# ================
JWT_SECRET_KEY=your_very_long_secret_key_at_least_32_characters
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30
ENCRYPTION_KEY=your_very_long_secret_key_for_2FA_at_least_32_characters

# ================
# Email Service
# ================
EMAIL_SERVICE_URL=http://email-api:8010
EMAIL_SERVICE_TIMEOUT=10
SERVICE_AUTH_TOKEN=st_dev_5555555555555555555555555555555555555555

# ================
# Application
# ================
DEBUG=true
HOST=0.0.0.0
PORT=8000
FRONTEND_URL=http://localhost:3000

# ================
# Token TTLs (seconds)
# ================
VERIFICATION_TOKEN_TTL=86400
RESET_TOKEN_TTL=3600

# ================
# Rate Limiting
# ================
RATE_LIMIT_REGISTER_PER_HOUR=3
RATE_LIMIT_LOGIN_PER_MINUTE=5
RATE_LIMIT_RESEND_VERIFICATION_PER_5MIN=1
RATE_LIMIT_PASSWORD_RESET_PER_5MIN=1

# ================
# Request Size Limits (bytes) - DoS Protection
# ================
# Default limit for all endpoints (10 KB recommended)
REQUEST_SIZE_LIMIT_DEFAULT=10240
# Global maximum limit across all endpoints (1 MB recommended)
REQUEST_SIZE_LIMIT_GLOBAL_MAX=1048576
# Authentication endpoints (10 KB - email + password + JSON overhead)
REQUEST_SIZE_LIMIT_REGISTER=10240
REQUEST_SIZE_LIMIT_LOGIN=10240
# Password reset endpoints (5 KB - email or token only)
REQUEST_SIZE_LIMIT_PASSWORD_RESET=5120
# Token operations (5 KB - JWT tokens + JSON overhead)
REQUEST_SIZE_LIMIT_TOKEN_REFRESH=5120
# Two-factor authentication (5 KB - TOTP codes only)
REQUEST_SIZE_LIMIT_2FA=5120

# ================
# Two-Factor Authentication (TOTP)
# ================
# Enable/disable TOTP 2FA feature globally
# When enabled: users can setup TOTP via authenticator apps
# 2FA secrets stored in Redis (not database)
TWO_FACTOR_ENABLED=false

# ================
# CORS
# ================
# Comma-separated list of allowed origins for Cross-Origin requests
# Development example:
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
# Production examples:
# CORS_ORIGINS=https://app.example.com,https://www.example.com

# ================
# Logging
# ================
# Log level for structured logging output
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Detailed debugging information for development
# INFO: General operational events (recommended for production)
# WARNING: Warning messages for recoverable issues
# ERROR: Error events for failures
# CRITICAL: Critical errors requiring immediate attention
LOG_LEVEL=INFO
